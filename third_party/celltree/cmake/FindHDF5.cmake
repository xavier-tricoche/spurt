# - Try to find fftw3
# Once done this will define
#
#  HDF5_FOUND - system has fftw
#  HDF5_INCLUDE_DIR - the BZip2 include directory
#  HDF5_LIBRARIES - Link these to use BZip2
#  HDF5_FLAGS

IF( HDF5_INCLUDE_DIR AND HDF5_LIBRARIES )
    SET( HDF5_FIND_QUIETLY TRUE )
ENDIF( HDF5_INCLUDE_DIR AND HDF5_LIBRARIES )

FIND_PATH( HDF5_INCLUDE_DIR hdf5.h )
FIND_LIBRARY( HDF5_LIBRARIES NAMES hdf5 )

IF( HDF5_INCLUDE_DIR AND HDF5_LIBRARIES )
   SET( HDF5_FOUND TRUE )
   INCLUDE( CheckLibraryExists )
   CHECK_LIBRARY_EXISTS( ${HDF5_LIBRARIES} H5Fopen "" HDF5_FOUND )
ELSE( HDF5_INCLUDE_DIR AND HDF5_LIBRARIES )
   SET( HDF5_FOUND FALSE )
ENDIF( HDF5_INCLUDE_DIR AND HDF5_LIBRARIES )

IF( HDF5_FOUND )
  IF( NOT HDF5_FIND_QUIETLY )
    MESSAGE( STATUS "Found HDF5 : ${HDF5_LIBRARIES}" )
  ENDIF( NOT HDF5_FIND_QUIETLY )
ELSE( HDF5_FOUND )
  IF( HDF5_FIND_REQUIRED )
    MESSAGE( FATAL_ERROR "Could NOT find HDF5" )
  ENDIF( HDF5_FIND_REQUIRED)
ENDIF( HDF5_FOUND )

MARK_AS_ADVANCED( HDF5_INCLUDE_DIR HDF5_LIBRARIES )